Read the entire code carefully and act as an experienced developer.

On the Load Condition page, we fetch buffer results from the previous page under the "Using Group-wise Set Max Resultant Calculations" section.

We also use the available Custom Group values (Base Vert, Base Trans, Base Long, Base Resultant) to calculate the Load Factor for each available Load Condition Parameter.

The Problem

Currently, the system calculates the Load Factor for all Load Condition Parameters using all available Custom Groups.
But the user does not want to calculate load factors for all combinations.

Required Functionality

The user must be able to choose which Load Condition Parameters should be used to calculate the Load Factor for a specific Custom Group.

Example:

In the database, we have 3 Load Condition Parameters:

NESC LIGHT (250B) — 30.0, 0.0, 9.0, 1.65, 2.5, 1.5, 1.65

NESC EXTREME WIND (250C) — 60.0, 0.0, 28.22, 1.1, 1.1, 1.1, 1.2

NESC COMBINED ICE & WIND (250D) — 15.0, 0.5, 2.3, 1.0, 1.0, 1.0, 1.0

Suppose the Custom Group is "crack".

The user wants to calculate the Load Factor only for:

NESC LIGHT (250B)

NESC COMBINED ICE & WIND (250D)

and not for NESC EXTREME WIND (250C).

Expected Behavior

Show a list of all Load Condition Parameters with checkboxes.

User selects which parameters to include.

Load Factor calculations must be performed only for the selected parameters of the chosen Custom Group.
note : give correct hint where to modify/add code 

this is model 
"class LoadCondition(models.Model):
    description = models.CharField(max_length=100)
    temperature = models.FloatField(verbose_name="°F")
    ice_radial = models.FloatField(verbose_name="Radial (in)")
    wind_pressure = models.FloatField(verbose_name="Pressure (psf)")
    angle_factor = models.FloatField()
    transverse_factor = models.FloatField()
    vertical_factor = models.FloatField()
    longitudinal_factor = models.FloatField()
    
    def __str__(self):
        return self.description

class AttachmentLoad(models.Model):
    LOAD_CASE_CHOICES = [
        ('LC1', 'LC1, NESC LIGHT (250B)'),
        ('LC2', 'LC2, NESC EXTREME WIND (250C)'),
        ('LC3', 'LC3, NESC COMBINED ICE AND WIND (250D)'),
        ('LC4', 'LC4, NORMAL EVERYDAY'),
        ('LC5', 'LC5, 2% POLE DEFLECTION'),
        ('LC6', 'LC6, FULL BREAK (250B)'),
        ('LC7', 'LC7, Full Break (250D)'),
    ]
    
    ATTACHMENT_CHOICES = [
        ('S1', 'S1'),
        ('P1,A', 'P1,A'),
        ('P1,B', 'P1,B'),
        ('P1,C', 'P1,C'),
        ('F1', 'F1'),
        ('D1,A & D2,A', 'D1,A & D2,A'),
        ('D1,B & D2,B', 'D1,B & D2,B'),
        ('D1,C & D2,C', 'D1,C & D2,C'),
        ('N1 & N2', 'N1 & N2'),
        ('C1', 'C1'),
        ('C2', 'C2'),
        ('C3', 'C3'),
        ('C4', 'C4'),
    ]
    
    load_case = models.CharField(max_length=3, choices=LOAD_CASE_CHOICES)
    attachment = models.CharField(max_length=20, choices=ATTACHMENT_CHOICES)
    vertical_load = models.FloatField(verbose_name="V")
    transverse_load = models.FloatField(verbose_name="T")
    longitudinal_load = models.FloatField(verbose_name="L")
    
    class Meta:
        unique_together = ('load_case', 'attachment')
    
    def __str__(self):
        return f"{self.get_load_case_display()} - {self.attachment}"
"

this is view 
"def load_condition_view(request):
    calculation_data = []
    processed_sums = {}
    group_wise_buffered_sums = {}
    
    # Try to get calculation data from multiple sources
    if request.method == 'POST':
        calculation_data_json = request.POST.get('calculation_data')
        processed_sums_json = request.POST.get('processed_sums')
        group_wise_buffered_sums_json = request.POST.get('group_wise_buffered_sums')
        
        if calculation_data_json:
            try:
                calculation_data = json.loads(calculation_data_json)
                request.session['calculation_data'] = calculation_data
                
                if processed_sums_json:
                    processed_sums = json.loads(processed_sums_json)
                    request.session['processed_sums'] = processed_sums
                
                # Handle group-wise buffered sums
                if group_wise_buffered_sums_json:
                    group_wise_buffered_sums = json.loads(group_wise_buffered_sums_json)
                    request.session['group_wise_buffered_sums'] = group_wise_buffered_sums
                    
            except json.JSONDecodeError:
                calculation_data = request.session.get('calculation_data', [])
                processed_sums = request.session.get('processed_sums', {})
                group_wise_buffered_sums = request.session.get('group_wise_buffered_sums', {})
    else:
        calculation_data = request.session.get('calculation_data', [])
        processed_sums = request.session.get('processed_sums', {})
        group_wise_buffered_sums = request.session.get('group_wise_buffered_sums', {})
    
    # Get all load conditions
    load_conditions = LoadCondition.objects.all().order_by('id')
    
    # Get all attachment loads grouped by load case
    attachment_loads = {}
    for lc in AttachmentLoad.LOAD_CASE_CHOICES:
        loads = AttachmentLoad.objects.filter(load_case=lc[0]).order_by('attachment')
        if loads.exists():
            attachment_loads[lc[0]] = {
                'name': lc[1],
                'loads': loads
            }
    
    # Process calculation data only if it exists
    if calculation_data:
        # Add record_id and clean keys to calculation data for template access
        for index, record in enumerate(calculation_data):
            record['record_id'] = f"record_{index}"
            record['Structure_Loads_Vert'] = float(record.get('Structure Loads Vert. (lbs)', 0) or 0)
            record['Structure_Loads_Trans'] = float(record.get('Structure Loads Trans. (lbs)', 0) or 0)
            record['Structure_Loads_Long'] = float(record.get('Structure Loads Long. (lbs)', 0) or 0)
            record['Resultant'] = float(record.get('Resultant (lbs)', 0) or 0)
            record['Set_No'] = record.get('Set No.', 'Unknown')
        
        factored_loads_by_condition = {}
        group_wise_factored_loads = {}  # NEW: Store factored loads by group

        # PRIORITY 1: Use group-wise buffered sums if available (Select Set Max Resultant Within Groups)
        if group_wise_buffered_sums:
            # Process EACH group separately
            for group_name, group_data in group_wise_buffered_sums.items():
                group_factored_loads = {}
                
                for condition in load_conditions:
                    from decimal import Decimal
                    
                    # Use group-wise buffered sums as base loads
                    base_vert = Decimal(str(group_data.get('vert', 0)))
                    base_trans = Decimal(str(group_data.get('trans', 0)))
                    base_long = Decimal(str(group_data.get('long', 0)))
                    
                    # Apply overload factors
                    factored_vert = base_vert * Decimal(str(condition.vertical_factor))
                    factored_trans = base_trans * Decimal(str(condition.transverse_factor))
                    factored_long = base_long * Decimal(str(condition.longitudinal_factor))
                    
                    factored_vert = float(factored_vert)
                    factored_trans = float(factored_trans)
                    factored_long = float(factored_long)
                    
                    factored_resultant = math.sqrt(factored_vert**2 + factored_trans**2 + factored_long**2)

                    group_factored_loads[condition.description] = {
                        'base_loads': {
                            'vert': float(base_vert),
                            'trans': float(base_trans),
                            'long': float(base_long),
                            'resultant': group_data.get('resultant', 0)
                        },
                        'factored_loads': {
                            'vert': factored_vert,
                            'trans': factored_trans,
                            'long': factored_long,
                            'resultant': factored_resultant
                        },
                        'factors': {
                            'vertical': condition.vertical_factor,
                            'transverse': condition.transverse_factor,
                            'longitudinal': condition.longitudinal_factor
                        },
                        'calculation_type': 'group_wise_buffered',
                        'group_name': group_name
                    }
                
                # Store factored loads for this group
                group_wise_factored_loads[group_name] = group_factored_loads

        # PRIORITY 2: Use processed sums if available (Select Group Max Resultant with Buffer)
        elif processed_sums and processed_sums.get('totalVert') is not None:  
            for condition in load_conditions:
                from decimal import Decimal
                
                # Use processed sums as base loads
                base_vert = Decimal(str(processed_sums.get('totalVert', 0)))
                base_trans = Decimal(str(processed_sums.get('totalTrans', 0)))
                base_long = Decimal(str(processed_sums.get('totalLong', 0)))
                
                # Apply overload factors
                factored_vert = base_vert * Decimal(str(condition.vertical_factor))
                factored_trans = base_trans * Decimal(str(condition.transverse_factor))
                factored_long = base_long * Decimal(str(condition.longitudinal_factor))
                
                factored_vert = float(factored_vert)
                factored_trans = float(factored_trans)
                factored_long = float(factored_long)
                
                factored_resultant = math.sqrt(factored_vert**2 + factored_trans**2 + factored_long**2)

                factored_loads_by_condition[condition.description] = {
                    'base_loads': {
                        'vert': float(base_vert),
                        'trans': float(base_trans),
                        'long': float(base_long),
                        'resultant': processed_sums.get('finalResultant', 0)
                    },
                    'factored_loads': {
                        'vert': factored_vert,
                        'trans': factored_trans,
                        'long': factored_long,
                        'resultant': factored_resultant
                    },
                    'factors': {
                        'vertical': condition.vertical_factor,
                        'transverse': condition.transverse_factor,
                        'longitudinal': condition.longitudinal_factor
                    },
                    'calculation_type': 'processed_sums',
                }
        
        # PRIORITY 3: Fallback to individual records calculation
        elif calculation_data:
            for condition in load_conditions:
                factored_loads_by_condition[condition.description] = {
                    'factors': {
                        'vertical': condition.vertical_factor,
                        'transverse': condition.transverse_factor,
                        'longitudinal': condition.longitudinal_factor
                    },
                    'calculation_type': 'individual_records'
                }
    
    context = {
        'load_conditions': load_conditions,
        'attachment_loads': attachment_loads,
        'calculation_data': calculation_data,
        'calculation_data_json': json.dumps(calculation_data),
        'factored_loads_by_condition': factored_loads_by_condition,
        'group_wise_factored_loads': group_wise_factored_loads,  # NEW: Add to context
        'has_factored_loads': bool(factored_loads_by_condition) or bool(group_wise_factored_loads),
        'processed_sums': processed_sums,
        'using_processed_sums': bool(processed_sums),
        'group_wise_buffered_sums': group_wise_buffered_sums,
        'using_group_wise_sums': bool(group_wise_buffered_sums),
        'has_group_wise_factored_loads': bool(group_wise_factored_loads)  # NEW: Flag for template
    }
    
    return render(request, 'app1/load_condition.html', context)"

this is load_condition.html 
"<div class="container">
    <header>
        <h2><i class="fas fa-table"></i> Load Conditions</h2>
        <p>Configure and apply load conditions to your calculations</p>
    </header>

    {% if calculation_data %}

    <div class="card">
        <h3><i class="fas fa-cog"></i> Load Condition Parameters</h3>
        
        <!-- Add Parameter Button -->
        <div class="action-buttons" style="justify-content: flex-start; margin-bottom: 20px;">
            <a href="{% url 'create_load_condition' %}" class="btn btn-primary">
                <i class="fas fa-plus-circle"></i> Add New Parameter
            </a>
        </div>
        
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>Description</th>
                        <th>°F</th>
                        <th>Radial (in)</th>
                        <th>Pressure (psf)</th>
                        <th>ANGLE</th>
                        <th>TRANSVERSE</th>
                        <th>VERTICAL</th>
                        <th>LONGITUDINAL</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for condition in load_conditions %}
                    <tr>
                        <td>{{ condition.description }}</td>
                        <td>{{ condition.temperature }}</td>
                        <td>{{ condition.ice_radial }}</td>
                        <td>{{ condition.wind_pressure }}</td>
                        <td>{{ condition.angle_factor }}</td>
                        <td>{{ condition.transverse_factor }}</td>
                        <td>{{ condition.vertical_factor }}</td>
                        <td>{{ condition.longitudinal_factor }}</td>
                        <td>
                            <div style="display: flex; gap: 5px;">
                                <a href="{% url 'edit_load_condition' condition.pk %}" 
                                class="btn btn-sm btn-outline-primary" 
                                style="padding: 5px 10px; font-size: 0.8rem;">
                                    <i class="fas fa-edit"></i>
                                </a>
                                <button onclick="deleteLoadCondition({{ condition.pk }})" 
                                        class="btn btn-sm btn-outline-danger" 
                                        style="padding: 5px 10px; font-size: 0.8rem;">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="9" style="text-align: center; color: #6c757d;">
                            <i class="fas fa-info-circle"></i> No load conditions configured yet.
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    
    <!-- Processed Sums Display -->
    {% if using_processed_sums %}
    <div class="card alert alert-info">
        <h3><i class="fas fa-info-circle"></i> Using Processed Sums as Base Loads</h3>
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-label">Base Vert</div>
                <div class="stat-value">{{ processed_sums.totalVert|floatformat:2 }}</div>
                <div class="stat-label">(lbs)</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Base Trans</div>
                <div class="stat-value">{{ processed_sums.totalTrans|floatformat:2 }}</div>
                <div class="stat-label">(lbs)</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Base Long</div>
                <div class="stat-value">{{ processed_sums.totalLong|floatformat:2 }}</div>
                <div class="stat-label">(lbs)</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Base Resultant</div>
                <div class="stat-value">{{ processed_sums.finalResultant|floatformat:2 }}</div>
                <div class="stat-label">(lbs)</div>
            </div>
        </div>
    </div>
    {% endif %}

    {% if using_group_wise_sums %}
<div class="card alert alert-warning">
    <h3><i class="fas fa-layer-group"></i> Using Group-wise Set Max Resultant Calculations</h3>
    
    {% for group_name, group_data in group_wise_buffered_sums.items %}
    <div class="group-section" style="margin-bottom: 15px;">
        <h4>Group: {{ group_name }}</h4>
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-label">Base Vert</div>
                <div class="stat-value">{{ group_data.vert|floatformat:2 }}</div>
                <div class="stat-label">(lbs)</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Base Trans</div>
                <div class="stat-value">{{ group_data.trans|floatformat:2 }}</div>
                <div class="stat-label">(lbs)</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Base Long</div>
                <div class="stat-value">{{ group_data.long|floatformat:2 }}</div>
                <div class="stat-label">(lbs)</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Base Resultant</div>
                <div class="stat-value">{{ group_data.resultant|floatformat:2 }}</div>
                <div class="stat-label">(lbs)</div>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% endif %}

   <!-- Factored Loads Display - MULTIPLE SECTIONS FOR GROUPS -->
{% if has_group_wise_factored_loads %}
    <!-- Display factored loads for EACH group separately -->
    {% for group_name, group_data in group_wise_factored_loads.items %}
    <div class="card group-factored-loads-section">
        <h3><i class="fas fa-calculator"></i> Factored Loads for Group: {{ group_name }}</h3>
        
        {% for condition_name, condition_data in group_data.items %}
        <div class="factored-loads-group">
            <h4><i class="fas fa-bolt"></i> {{ condition_name }}</h4>
            
            <!-- Show base and factored loads comparison -->
            <div class="loads-comparison">
                <div class="base-loads">
                    <h5>Base Loads (Group: {{ group_name }})</h5>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-label">Vert</div>
                            <div class="stat-value">{{ condition_data.base_loads.vert|floatformat:2 }}</div>
                            <div class="stat-label">(lbs)</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Trans</div>
                            <div class="stat-value">{{ condition_data.base_loads.trans|floatformat:2 }}</div>
                            <div class="stat-label">(lbs)</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Long</div>
                            <div class="stat-value">{{ condition_data.base_loads.long|floatformat:2 }}</div>
                            <div class="stat-label">(lbs)</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Resultant</div>
                            <div class="stat-value">{{ condition_data.base_loads.resultant|floatformat:2 }}</div>
                            <div class="stat-label">(lbs)</div>
                        </div>
                    </div>
                </div>
                
                <div class="factored-loads">
                    <h5>Factored Loads (×{{ condition_data.factors.vertical }}, ×{{ condition_data.factors.transverse }}, ×{{ condition_data.factors.longitudinal }})</h5>
                    <div class="stats-grid">
                        <div class="stat-card highlighted">
                            <div class="stat-label">Vert</div>
                            <div class="stat-value">{{ condition_data.factored_loads.vert|floatformat:2 }}</div>
                            <div class="stat-label">(lbs)</div>
                        </div>
                        <div class="stat-card highlighted">
                            <div class="stat-label">Trans</div>
                            <div class="stat-value">{{ condition_data.factored_loads.trans|floatformat:2 }}</div>
                            <div class="stat-label">(lbs)</div>
                        </div>
                        <div class="stat-card highlighted">
                            <div class="stat-label">Long</div>
                            <div class="stat-value">{{ condition_data.factored_loads.long|floatformat:2 }}</div>
                            <div class="stat-label">(lbs)</div>
                        </div>
                        <div class="stat-card highlighted">
                            <div class="stat-label">Resultant</div>
                            <div class="stat-value">{{ condition_data.factored_loads.resultant|floatformat:2 }}</div>
                            <div class="stat-label">(lbs)</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% if not forloop.last %}<hr class="condition-divider">{% endif %}
        {% endfor %}
    </div>
    {% if not forloop.last %}<hr class="group-divider">{% endif %}
    {% endfor %}

{% elif has_factored_loads %}
    <!-- Original single section for processed sums -->
    {% for condition_name, condition_data in factored_loads_by_condition.items %}
    <div class="card factored-loads-section">
        <h3><i class="fas fa-calculator"></i> Factored Loads for {{ condition_name }}</h3>
        
        <!-- Show base and factored loads comparison -->
        <div class="loads-comparison">
            {% if condition_data.calculation_type == 'processed_sums' %}
            <div class="base-loads">
                <h5>Base Loads (Processed Sums)</h5>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-label">Vert</div>
                        <div class="stat-value">{{ condition_data.base_loads.vert|floatformat:2 }}</div>
                        <div class="stat-label">(lbs)</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Trans</div>
                        <div class="stat-value">{{ condition_data.base_loads.trans|floatformat:2 }}</div>
                        <div class="stat-label">(lbs)</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Long</div>
                        <div class="stat-value">{{ condition_data.base_loads.long|floatformat:2 }}</div>
                        <div class="stat-label">(lbs)</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Resultant</div>
                        <div class="stat-value">{{ condition_data.base_loads.resultant|floatformat:2 }}</div>
                        <div class="stat-label">(lbs)</div>
                    </div>
                </div>
            </div>
            {% endif %}
            
            <div class="factored-loads">
                <h5>Factored Loads (×{{ condition_data.factors.vertical }}, ×{{ condition_data.factors.transverse }}, ×{{ condition_data.factors.longitudinal }})</h5>
                <div class="stats-grid">
                    <div class="stat-card highlighted">
                        <div class="stat-label">Vert</div>
                        <div class="stat-value">
                            {% if condition_data.calculation_type == 'processed_sums' %}
                                {{ condition_data.factored_loads.vert|floatformat:2 }}
                            {% else %}
                                Calculating...
                            {% endif %}
                        </div>
                        <div class="stat-label">(lbs)</div>
                    </div>
                    <div class="stat-card highlighted">
                        <div class="stat-label">Trans</div>
                        <div class="stat-value">
                            {% if condition_data.calculation_type == 'processed_sums' %}
                                {{ condition_data.factored_loads.trans|floatformat:2 }}
                            {% else %}
                                Calculating...
                            {% endif %}
                        </div>
                        <div class="stat-label">(lbs)</div>
                    </div>
                    <div class="stat-card highlighted">
                        <div class="stat-label">Long</div>
                        <div class="stat-value">
                            {% if condition_data.calculation_type == 'processed_sums' %}
                                {{ condition_data.factored_loads.long|floatformat:2 }}
                            {% else %}
                                Calculating...
                            {% endif %}
                        </div>
                        <div class="stat-label">(lbs)</div>
                    </div>
                    <div class="stat-card highlighted">
                        <div class="stat-label">Resultant</div>
                        <div class="stat-value">
                            {% if condition_data.calculation_type == 'processed_sums' %}
                                {{ condition_data.factored_loads.resultant|floatformat:2 }}
                            {% else %}
                                Calculating...
                            {% endif %}
                        </div>
                        <div class="stat-label">(lbs)</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
{% endif %}

    <!-- REMOVED: Custom Selection Results (tied to removed sections) -->

    <div class="action-buttons">
        <button class="btn btn-secondary" onclick="window.history.back()">
            <i class="fas fa-arrow-left"></i> Back to Previous
        </button>
        <button class="btn btn-primary" onclick="window.print()">
            <i class="fas fa-print"></i> Print Report
        </button>
        <button class="btn btn-info" onclick="window.location.href='/'">
            <i class="fas fa-home"></i> Back to Home
        </button>
    </div>
    {% endif %}

<footer>
    <p>Generated on {% now "F j, Y, g:i a" %} | Structural Analysis Tool</p>
</footer>


<script>
document.addEventListener('DOMContentLoaded', function() {
    // Toggle buffer settings visibility
    const applyBufferCheckbox = document.getElementById('applyBuffer');
    const bufferSettings = document.getElementById('bufferSettings');
    
    applyBufferCheckbox.addEventListener('change', function() {
        bufferSettings.style.display = this.checked ? 'block' : 'none';
    });
    
    // Handle final calculation
    const calculateButton = document.getElementById('calculateFinalLoads');
    calculateButton.addEventListener('click', function() {
        // Get calculation data from previous step (you'll need to pass this from the previous view)
        const calculationData = JSON.parse('{{ calculation_data_json|escapejs }}' || '[]');
        
        // Get form data
        const formData = new FormData(document.getElementById('finalCalculationForm'));
        
        // Add calculation data to form data
        formData.append('calculation_data', JSON.stringify(calculationData));
        
        // Show loading indicator
        calculateButton.disabled = true;
        calculateButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Calculating...';
        
        // Send AJAX request
        fetch('{% url "calculate_final_loads" %}', {
            method: 'POST',
            body: formData,
            headers: {
                'X-CSRFToken': '{{ csrf_token }}'
            }
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                // Display results
                displayFinalResults(data.max_resultant_values);
            } else {
                alert('Error: ' + data.error);
            }
        })
        .catch(error => {
            alert('Error: ' + error.message);
        })
        .finally(() => {
            // Reset button
            calculateButton.disabled = false;
            calculateButton.innerHTML = '<i class="fas fa-calculator"></i> Calculate Final Loads';
        });
    });
    
    function displayFinalResults(results) {
        const tableBody = document.querySelector('#finalLoadsTable tbody');
        tableBody.innerHTML = '';
        
        let totalVert = 0;
        let totalTrans = 0;
        let totalLong = 0;
        
        for (const [setNo, values] of Object.entries(results)) {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${setNo}</td>
                <td>${values.vert.toFixed(2)}</td>
                <td>${values.trans.toFixed(2)}</td>
                <td>${values.long.toFixed(2)}</td>
                <td>${values.resultant.toFixed(2)}</td>
            `;
            tableBody.appendChild(row);
            
            totalVert += values.vert;
            totalTrans += values.trans;
            totalLong += values.long;
        }
        
        // Add total row
        const totalResultant = Math.sqrt(totalVert**2 + totalTrans**2 + totalLong**2);
        const totalRow = document.createElement('tr');
        totalRow.classList.add('highlight');
        totalRow.innerHTML = `
            <td><strong>Total</strong></td>
            <td><strong>${totalVert.toFixed(2)}</strong></td>
            <td><strong>${totalTrans.toFixed(2)}</strong></td>
            <td><strong>${totalLong.toFixed(2)}</strong></td>
            <td><strong>${totalResultant.toFixed(2)}</strong></td>
        `;
        tableBody.appendChild(totalRow);
        
        // Show results section
        document.getElementById('finalResults').style.display = 'block';
    }
});
</script>

<script>


// Custom Selection Logic for Load Conditions Page
document.addEventListener('DOMContentLoaded', function() {
    initializeSelection();
});



function deleteLoadCondition(pk) {
    if (confirm('Are you sure you want to delete this load condition?')) {
        // Create a form and submit it via POST
        const form = document.createElement('form');
        form.method = 'POST';
        form.action = `/load-condition/${pk}/delete/`;
        
        const csrfToken = document.querySelector('[name=csrfmiddlewaretoken]');
        if (csrfToken) {
            form.appendChild(csrfToken.cloneNode(true));
        } else {
            const csrfInput = document.createElement('input');
            csrfInput.type = 'hidden';
            csrfInput.name = 'csrfmiddlewaretoken';
            csrfInput.value = '{{ csrf_token }}';
            form.appendChild(csrfInput);
        }
        
        document.body.appendChild(form);
        form.submit();
    }
}
</script>
"